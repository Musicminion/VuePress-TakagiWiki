import{defineComponent as g,computed as d,onMounted as y,h as a}from"vue";import"../styles/code-pen.scss";const b=["title","description","tags","html_classes","head","stylesheets","scripts"],v=["html","xml","haml","markdown","slim","pug","application/x-slim"],x=["css","less","scss","sass","stylus","postcss","text/css","text/x-sass","text/x-scss","text/x-less","text/x-styl"],w=["js","javascript","coffeescript","livescript","typescript","babel","text/javascript","text/x-coffeescript","text/x-livescript","text/typescript"],p={vue:"js",flutter:"js"},u="https://codepen.io",S=(e="")=>v.includes(e)?"html":x.includes(e)?"css":w.includes(e)?"js":p[e]?p[e]:"unknown",C=(e,n)=>{if(typeof e.user=="string")return e.user;for(let t=0;t<n.children.length;t++){const s=(n.children[t].href||"").match(/codepen\.(io|dev)\/(\w+)\/pen\//i);if(s)return s[2]}return"anon"},j=e=>{const{attributes:n}=e,t={};for(let s=0;s<n.length;s++){const r=n[s].name;r.startsWith("data-")&&(t[r.replace("data-","")]=n[s].value)}return t.href&&(t["slug-hash"]=t.href),t.type&&(t["default-tab"]=t.type),t.safe&&(t.animations=t.safe==="true"?"run":"stop-after-5"),"prefill"in t||t["slug-hash"]?(t.user=C(t,e),t):null},k=e=>{let n="";for(const t in e)t!=="prefill"&&(n!==""&&(n+="&"),n+=t+"="+encodeURIComponent(e[t]));return n},c=e=>{const n=e.preview==="true"?"embed/preview":"embed";if("prefill"in e)return[u,n,"prefill"].join("/");let t=e["slug-hash"];if(!t)throw new Error("slug-hash is required");return e.token&&(t+="/"+e.token),[u,e.user||"anon",n,t+"?"+k(e)].join("/")},o=(e,n)=>{const t=document.createElement(e);for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.setAttribute(s,n[s]);return t},E=e=>{if(Object.hasOwn(e.dataset,"prefill")){const n={},t=JSON.parse(decodeURI(e.dataset.prefill)||"{}");for(const s in t)b.includes(s)&&(n[s]=t[s]);return Array.from(e.querySelectorAll("[data-lang]")).forEach(s=>{const{lang:r,langVersion:i,optionsAutoprefixer:m}=s.dataset;m&&(n.css_prefix="autoprefixer");const l=S(r);n[l]=s.innerText,r!==l&&(n[l+"_pre_processor"]=r),i&&(n[l+"_version"]=i)}),JSON.stringify(n)}},O=(e,n)=>{const t=o("form",{class:"codepen-embed-form",style:"display: none;",method:"post",action:c(e),target:e.name||""}),s=E(n);s&&(e.data=s);for(const r in e)r!=="prefill"&&t.append(o("input",{type:"hidden",name:r,value:e[r].toString()}));return t},P=e=>{const n={allowfullscreen:"true",allowpaymentrequest:"true",allowTransparency:"true",class:"cp_embed_iframe "+(e.class||""),frameborder:"0",height:(e.height||300).toString(),width:"100%",name:e.name||"CodePen Embed",scrolling:"no",src:c(e),style:"width: 100%; overflow:hidden; display:block;",title:e["pen-title"]||"CodePen Embed"};return"prefill"in e||(n.loading="lazy"),e["slug-hash"]&&(n.id=`code-pen-embed-${e["slug-hash"].replace("/","_")}`),o("iframe",n)},_=(e,n)=>{if(e.parentNode){const t=document.createElement("div");return t.className="codepen-embed-wrapper",t.append(n),e.parentNode.replaceChild(t,e),t}return e.append(n),e},$=(e,n)=>{const t=document.createDocumentFragment();let s;t.append(P(e)),"prefill"in e&&(s=O(e,n),t.append(s)),_(n,t),s&&s.submit()};let A=1;const h=(e=".codepen")=>{const n=document.querySelectorAll(e);for(let t=0;t<n.length;t++){const s=n[t],r=j(s);r&&(r.name=`codepen-embed-${A++}`,$(r,s))}},f=(e=".codepen")=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{h(e=".codepen")}):h(e)};var N=g({name:"CodePen",props:{link:{type:String,default:""},user:{type:String,default:""},slugHash:{type:String,default:""},title:{type:String,default:""},height:{type:[String,Number],default:380},theme:{type:String,default:"default"},defaultTab:{type:Array,default:()=>["result"]},status:{type:String,default:"preview"}},setup(e){const n=()=>{const r=/(?:^(?:https?:)?\/\/codepen.io\/|^\/|^)(.*?)\/(?:pen|embed)\/(.*?)\/?$/.exec(e.link);return{user:r==null?void 0:r[1],slugHash:r==null?void 0:r[2]}},t=d(()=>n().user||e.user),s=d(()=>n().slugHash||e.slugHash);return y(()=>{e.status!=="clicktorun"&&f(`.codepen-${s.value}`)}),()=>a("div",{class:["codepen-wrapper",`codepen-${s.value}`],"data-height":e.height,"data-theme-id":e.theme,"data-user":t.value,"data-slug-hash":s.value,"data-default-tab":e.defaultTab.join(","),"data-pen-title":e.title,"data-preview":e.status==="preview",user:e.user},[e.status==="clicktorun"?a("button",{type:"button",class:"codepen-button",onClick:()=>{f(`.codepen-${s.value}`)}},"Run Code"):null,a("span",["See the Pen ",a("a",{href:e.link},[e.title])," by ",a("a",{href:`https://codepen.io/${t.value}`},[t.value])," on ",a("a",{href:"https://codepen.io"},["CodePen"]),"."])])}});export{N as default};
//# sourceMappingURL=CodePen.js.map
